{% extends 'default/base.html.twig' %}

{% block title %}Home{% endblock %}

{% block header %}
    {{ include('default/header.html.twig') }}
{% endblock %}
{% block menu %}
    {{ include('default/menu.html.twig') }}
{% endblock %}
{% block body %}
    <div class="container">
        <div class="row">
            <div class="col s12 m4">
                <div class="icon-block">
                    <h2 class="center">
                        <i class="material-icons">flash_on</i>
                    </h2>
                    <h5 class="center">Speeds up development</h5>

                    <p class="light">We did most of the heavy lifting for you to provide a default stylings that incorporate our custom components. Additionally, we refined animations and transitions to provide a smoother experience for developers.</p>
                    <p>
                        <a href="#">En savoir plus ></a>
                    </p>
                </div>
            </div>
            {# bloc utilisateurs en ligne visible si user admin #}
            {% if is_granted('ROLE_ADMIN') %}
            <div class="col s12 m4">
                <div class="icon-block">
                    <h2 class="center">
                        <i class="material-icons">group</i>
                    </h2>
                    <h5 class="center">Utilisateurs En ligne</h5>
                    
                    <div class="collection">
                        {% for users in userOnline %}
         
                            <a href="#!" class="collection-item"><span class="widthBadge new badge
                                {% if users.onLineUser == 1 %}green{% else %}red{% endif %}
                                " data-badge-caption="{% if users.onLineUser == 1 %}En ligne{% else %}DeconnectÃ©{% endif %}">
                            </span>{{users.username| capitalize }}</a>

                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}
            {# fin de bloc utilisateurs en ligne #}
            <div class="col s12 m4">
                <div class="icon-block">
                    <h2 class="center">
                        <i class="material-icons">settings</i>
                    </h2>
                    <h5 class="center">Easy to work with</h5>

                    <p class="light">We have provided detailed documentation as well as specific code examples to help new users get started. We are also always open to feedback and can answer any questions a user may have about Materialize.</p>
                    <p>
                        <a href="#">En savoir plus ></a>
                    </p>
                </div>
            </div>
        </div>

        <a  onclick="window.open('{{ compagnies }}', '_blank')" class="waves-effect waves-light btn-small button-middle grey darken-3">En savoir plus sur l'entreprise</a>
    </div>
    <div class="back">
        <div class="carousel carousel-slider center" data-indicators="true">
            <div class="carousel-item grey darken-4 white-text" href="#one!">
                <h2>Derniers Posts</h2>
                <div class="container">
                    <div class="row">
                        {% for lasts in last %}
                            <div class="col s12 m8 l6">
                                <div class="card-panel grey lighten-5 z-depth-1">
                                    <span class="black-text">
                                        <p><a href="{{ path('blog_view', {'id': lasts.id}) }}">{{  lasts.title }}</a></p>
                                        <p>{{ lasts.description[:45]~'...'  }}</p>
                                    </span>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="carousel-item grey darken-3 white-text" href="#two!">
                <h2>Second Panel</h2>
                <p class="white-text">This is your second panel</p>
            </div>
            <div class="carousel-item grey darken-2 white-text" href="#three!">
                <h2>Third Panel</h2>
                <p class="white-text">This is your third panel</p>
            </div>
            <div class="carousel-item grey darken-1 white-text" href="#four!">
                <h2>Fourth Panel</h2>
                <p class="white-text">This is your fourth panel</p>
            </div>
        </div>
    </div>
{% endblock %}
{% block social %}
    {{ include('default/social.html.twig') }}
{% endblock %}